(function(e,c,b){"function"===typeof define&&define.amd?define([],b):"object"===typeof exports?module.exports=b():c[e]=b()})("Offbeat",this,function(){return function(){function e(a){return a.split(",").map(function(a){return a.trim().split(" ")})}function c(a,h,b,e){var c=new (window.AudioContext||window.webkitAudioContext),g=0;a.forEach(function(k,m){var f=c.createOscillator();f.type=h;f.connect(c.destination);f.frequency.value=n[k[1]];f.start(g);g+=l[k[0]]*b*4/(e/60);f.stop(g);m===a.length&&(f.onended=
function(){c.close()})})}var b={},n={rest:0,a0:27.5,a1:55,a2:110,a3:220,a4:440,a5:880,a6:1760,a7:3520,b0:30.8677,b1:61.7354,b2:123.4708,b3:246.9416,b4:493.8832,b5:987.7664,b6:1975.5328,b7:3951.0656,c1:32.7032,c2:65.4064,c3:130.8128,c4:261.6256,c5:523.2512,c6:1046.5024,c7:2093.0048,c8:4186.0096,d1:36.7081,d2:73.4162,d3:146.8324,d4:293.6648,d5:587.3296,d6:1174.6592,d7:2349.3184,e1:41.2034,e2:82.4068,e3:164.8136,e4:329.6272,e5:659.2544,e6:1318.5088,e7:2637.0176,f1:43.6535,f2:87.307,f3:174.614,f4:349.228,
f5:698.456,f6:1396.912,f7:2793.824,g1:48.9994,g2:97.9988,g3:195.9976,g4:391.9952,g5:783.9904,g6:1567.9808,g7:3135.9616,"a#0":29.1352,"a#1":58.2704,"a#2":116.5408,"a#3":233.0816,"a#4":466.1632,"a#5":932.3264,"a#6":1864.6528,"a#7":3729.3056,"c#1":34.6478,"c#2":69.2956,"c#3":138.5912,"c#4":277.1824,"c#5":554.3648,"c#6":1108.7296,"c#7":2217.4592,"d#1":38.8909,"d#2":77.7818,"d#3":155.5636,"d#4":311.1272,"d#5":622.2544,"d#6":1244.5088,"d#7":2489.0176,"f#1":46.2493,"f#2":92.4986,"f#3":184.9972,"f#4":369.9944,
"f#5":739.9888,"f#6":1479.9776,"f#7":2959.9552,"g#1":51.9131,"g#2":103.8262,"g#3":207.6524,"g#4":415.3048,"g#5":830.6096,"g#6":1661.2192,"g#7":3322.4384,a_1:51.9131,a_2:103.8262,a_3:207.6524,a_4:415.3048,a_5:830.6096,a_6:1661.2192,a_7:3322.4384,b_0:29.1352,b_1:58.2704,b_2:116.5408,b_3:233.0816,b_4:466.1632,b_5:932.3264,b_6:1864.6528,b_7:3729.3056,d_1:34.6478,d_2:69.2956,d_3:138.5912,d_4:277.1824,d_5:554.3648,d_6:1108.7296,d_7:2217.4592,e_1:38.8909,e_2:77.7818,e_3:155.5636,e_4:311.1272,e_5:622.2544,
e_6:1244.5088,e_7:2489.0176,g_1:46.2493,g_2:92.4986,g_3:184.9972,g_4:369.9944,g_5:739.9888,g_6:1479.9776,g_7:2959.9552},l={ts:.03125,s:.0625,t:.08333,e:.125,q:.25,h:.5,w:1};b.layer=function(a){var b={tempo:60,timeSig:1,instrument:"sine",notes:""};if(a)for(var d in a)if(b.hasOwnProperty(d))b[d]=a[d];else throw'Property "'+d+'" does not exist.';return b};b.play=function(a){if(!a.notes||""===a.notes)throw'"notes" property not provided.';a=b.layer(a);var h=e(a.notes);c(h,a.instrument,a.timeSig,a.tempo)};
b.time=function(a){if(!a.notes||""===a.notes)return 0;var c=0,d=b.layer(a);e(d.notes).forEach(function(a){c+=l[a[0]]*d.timeSig*4/(d.tempo/60)});return c};return b}()});
